# ChatManager - Плагин для форматирования чата в Minecraft

ChatManager — это плагин для Minecraft-серверов, который позволяет гибко управлять форматированием сообщений, локальным и глобальным чатом, плейсхолдерами, упоминаниями игроков и отображением информации прямо в чате или на экране.

---

## Основные возможности

- **Локальный и глобальный чат** с индивидуальными форматами.
- **Кастомные плейсхолдеры**: команды, инвентари, баланс, позиция, пинг, сайт, магазин и другие.
- **Поддержка PlaceholderAPI** для динамических значений.
- **Поддержка LuckPerms** для префиксов, суффиксов и цветов ника.
- **Упоминания игроков (@Nick)** с уведомлением прямо на экране (ActionBar).
- **Полная кастомизация сообщений** через MiniMessage и legacy цвета (&a, &b…).
- **Конфигурируемые сообщения и форматы** через YAML.

---

## Установка

1. Скачайте **последний релиз** из раздела [Releases](../../releases)
2. Поместите его в папку /plugins
3. Запустите сервер — плагин создаст файл `config.yml` с настройками по умолчанию.
4. Настройте `config.yml` под ваши нужды (форматы чата, плейсхолдеры, цвета и т.д.).
5. Перезагрузите сервер или используйте команду `/chatmanager reload`.

---

## Команды

| Команда                      | Описание                                         |
|------------------------------|--------------------------------------------------|
| `/chatmanager help`          | Показать справку по командам                     |
| `/chatmanager placeholders`  | Показать доступные заполнители                   |
| `/chatmanager colors`        | Показать доступные игрокам цвета                 |
| `/chatmanager reload`        | Перезагрузить конфигурацию плагина               |
| `/chatmanager info`          | Показать информацию о плагине                    |
| `/chatmanager mentiontoggle` | Включить или отключить уведомления о упоминаниях |
| `/chatmanager bc`            | Отправка отформатированного broadcast сообщения  |
| `/chatmanager send`          | Отправка отформатированного сообщения игроку     |

## Разрешения

| Разрешение                   | Описание                                                             |
|------------------------------|----------------------------------------------------------------------|
| `chatmanager.color.basic`    | Использование в сообщениях цветов через `&`                          |
| `chatmanager.color.advanced` | Использование в сообщениях форматов MiniMessages                     |
| `chatmanager.color.*`        | Использование в сообщениях всех форматов `MiniMessages` и цветов `&` |
| `chatmanager.format.italic`  | Использование в сообщениях курсива через `&o`                        |
| `chatmanager.format.bold`    | Использование в сообщениях жирного текста `&l`                       |
| `chatmanager.format.*`       | Использование в сообщениях всех форматов через `&`                   |
| `chatmanager.reload`         | Использование `/chatmanager reload`                                  |
| `chatmanager.bc`             | Использование `/chatmanager bc`                                      |
| `chatmanager.send`           | Использование `/chatmanager send`                                    |
| `chatmanager.local.listen`   | Получение локальных сообщений вне радиуса                            |
| `chatmanager.*`              | Все права приложения                                                 |

---

## Конфигурация (`config.yml`)

Пример конфигурации для сообщений и плейсхолдеров:

```yaml
# Радиус локального чата (в блоках)
local-chat-radius: 100

# В течении какого времени активны ссылки на инвентари (в минутах)
inv-expired-minutes: 3

# Добавлять никам игроков hover с текстом.
player-hover:
  enabled: true

# Информировать игроков об упоминании их в чате
player-mention:
  enabled: true

# Формат сообщения
message-format: "{prefix}{username-color}{displayname}{suffix}<dark_gray> »<reset> {message}"

# Настройки форматов
formats:
  # Формат для локального чата
  local: "<yellow>Ⓛ</yellow> {message}"
  # Формат для глобального чата
  global: "<green>Ⓖ</green> {message}"

# Подставлять команды, отправленные через [/command]
commands:
  enabled: true
  display-text: "<aqua>[<yellow>{command}<aqua>]<reset>"
  hover-text: "<yellow>Нажмите, чтобы использовать команду!"
  click-action: "SUGGEST_COMMAND"
  description: "Преобразует команды в квадратных скобках в кликабельные элементы"

# Кастомные заполнители
custom-placeholders:
  # Показать инвентарь
  inv:
    display-text: "<white>[<aqua>Инвентарь <white>%player_name%]<reset>"
    inventory-title: "Инвентарь %player_name%"
    hover-text: "<yellow>Нажмите чтобы посмотреть!"
    click-action: "SHOW_INV"
    description: "Показывает инвентарь игрока в интерактивном просмотре"

messages:
  ...
```

---

## Пример использования

- **Локальный чат:** обычное сообщение игрока отображается только в пределах радиуса локального чата.
- **Глобальный чат:** сообщение с `!` в начале будет отправлено всем игрокам на сервере.
- **Плейсхолдеры в сообщениях:** `[inv]`, `[ender]`, `[item]`, `[vk]`, `[money]` и др.
- **Упоминания:** `@PlayerName` уведомляют игрока прямо на экране через ActionBar.

---

## Минимальные требования

- Paper 1.21.8
- Java 21
- (Опционально) PlaceholderAPI для динамических плейсхолдеров
- (Опционально) LuckPerms префиксов и суффиксов ников

---

## Разработка и поддержка

- Автор: FlyAwayMaking
- Лицензия: MIT / указана в `LICENSE`

---

## Примечания

- Все цвета и форматирование поддерживаются через MiniMessage.
- Плейсхолдеры можно настраивать через `config.yml` без изменения кода.
- Уведомления упоминаний полностью управляются игроком через `/chatmanager toggle`.
